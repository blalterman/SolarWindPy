# SolarWindPy Documentation Template System

## Overview

The SolarWindPy documentation uses a template-based system to ensure consistent API documentation across all modules while preserving customizations through rebuild cycles.

## Why Templates Are Essential

### The Persistence Problem
- **52 API documentation files** are auto-generated by `sphinx-apidoc` in `docs/source/api/`
- These files are **ephemeral** (regenerated on every build) and **git-ignored**
- **Manual edits to API files are lost** on every documentation rebuild
- Templates in `docs/source/_templates/autosummary/` are the **only way** to persist customizations

### Template Architecture

```
docs/source/_templates/autosummary/
├── module.rst      # Template for module-level documentation  
└── class.rst       # Template for class-level documentation
```

## Template Details

### Module Template (`module.rst`)
```rst
{{ fullname | escape | underline}}

.. automodule:: {{ fullname }}
   :members:
   :show-inheritance:
   :undoc-members:
   :no-index:
```

**Purpose**: Controls how module documentation is generated
**Key directives**:
- `:members:` - Include all module members
- `:show-inheritance:` - Show inheritance relationships
- `:undoc-members:` - Include members without docstrings
- `:no-index:` - Prevent duplicate index entries

### Class Template (`class.rst`)
Standard Sphinx autosummary class template with:
- Automatic `__init__` method documentation
- Methods section with autosummary
- Attributes section with autosummary
- Proper Jinja2 templating for dynamic content

## Post-Processing

### No-Index Addition (`add_no_index.py`)
- Automatically adds `:no-index:` directive to generated module files
- Prevents duplicate warnings in Sphinx builds
- Runs after `sphinx-apidoc` but before Sphinx build
- **Critical**: Without this, builds generate hundreds of duplicate warnings

## Template Usage

### Modifying API Documentation
1. **Edit templates** in `docs/source/_templates/autosummary/`
2. **Never edit** files in `docs/source/api/` (they're regenerated)
3. **Test changes** with `make clean && make html`
4. **Verify persistence** across multiple rebuild cycles

### Build Process
1. `sphinx-apidoc` generates RST files in `docs/source/api/`
2. `add_no_index.py` post-processes generated files
3. Sphinx uses templates to format the content
4. Templates ensure consistent formatting across all modules

## Maintenance Guidelines

### Keep Templates Simple
- **Avoid complex conditional logic** in templates
- **Use standard Sphinx directives** for maximum compatibility  
- **Test template changes** thoroughly before deployment
- **Document any customizations** for future maintainers

### Troubleshooting
- **Build failures**: Check template syntax with `make clean && make html`
- **Missing content**: Verify template directives are correct
- **Duplicate warnings**: Ensure `:no-index:` post-processing works
- **Inconsistent formatting**: Check that all modules use same template

## ReadTheDocs Integration

Templates work seamlessly with ReadTheDocs:
- **Standard Sphinx patterns** - No special ReadTheDocs configuration needed
- **Consistent rendering** - Templates ensure uniform appearance
- **Build reliability** - Simple templates reduce build complexity
- **Performance** - Minimal overhead from template processing

This template system provides the essential infrastructure for maintaining consistent, customizable API documentation while following established Sphinx/ReadTheDocs patterns.